{"version":3,"sources":["scm.js","adf-widget-scm.min.js","adf-widget-scm.tpl.js","markdownPreview/markdownPreviewEdit.js","markdownPreview/markdownPreview.js","commits/commits.js","edit/simpleEditController.js","charts/commitsLastCommits.js","charts/commitsByMonth.js","charts/commitsByAuthor.js","service.js","adf-widget-scm.js"],"names":["window","undefined","angular","module","config","dashboardProvider","category","edit","templateUrl","controller","controllerAs","resolve","repositories","SCM","getRepositories","resolveRepository","result","repository","getRepository","$inject","widget","title","description","reload","commitsByAuthor","getCommitsByAuthor","commitsByMonth","getCommitsByMonth","commits","getCommits","fileContent","path","getFileContent","run","$templateCache","put","vm","this","getBranchesByRepositoryId","repositoryId","then","status","branches","branch","$sce","forEach","commit","trustAsHtml","gravatarHash","hash","properties","i","length","key","value","$filter","createChart","options","scales","yAxes","id","display","position","ticks","fixedStepSize","scaleLabel","labelString","chartData","chart","labels","data","series","class","date","Date","getUTCFullYear","getUTCMonth","getUTCDate","entry","count","push","reverse","month","author","legend","factory","scmEndpoint","$http","request","url","get","response","error","limit","changesets","filePath"],"mappings":"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","file":"adf-widget-scm.min.js","sourcesContent":["/*\n * The MIT License\n *\n * Copyright (c) 2016, Sebastian Sdorra\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nangular.module('adf.widget.scm', ['adf.provider', 'chart.js', 'ngSanitize', 'btford.markdown'])\n  .config(function (dashboardProvider) {\n\n    // category for widget add dialog\n    var category = 'SCM-Manager';\n\n    var edit = {\n      templateUrl: '{widgetsPath}/scm/src/edit/edit.html',\n      controller: 'ScmEditController',\n      controllerAs: 'vm',\n      resolve: {\n        /** @ngInject **/\n        repositories: function (SCM) {\n          return SCM.getRepositories();\n        }\n      }\n    };\n\n    var resolveRepository = function (SCM, config) {\n      var result = null;\n      if (config.repository) {\n        result = SCM.getRepository(config.repository);\n      }\n      return result;\n    };\n\n    dashboardProvider\n      .widget('scm-commits-by-author', {\n        title: 'SCM Commits By Author',\n        description: 'Displays pie chart for commit count by author',\n        category: category,\n        templateUrl: '{widgetsPath}/scm/src/charts/pie-chart.html',\n        controller: 'CommitsByAuthorController',\n        controllerAs: 'vm',\n        reload: true,\n        resolve: {\n          repository: resolveRepository,\n          commitsByAuthor: function (SCM, config) {\n            var result = null;\n            if (config.repository) {\n              result = SCM.getCommitsByAuthor(config.repository);\n            }\n            return result;\n          }\n        },\n        edit: edit\n      })\n      .widget('scm-commits-by-month', {\n        title: 'SCM Commits By Month',\n        description: 'Displays line chart for commit count by month',\n        category: category,\n        templateUrl: '{widgetsPath}/scm/src/charts/line-chart.html',\n        controller: 'CommitsByMonthController',\n        controllerAs: 'vm',\n        reload: true,\n        resolve: {\n          repository: resolveRepository,\n          commitsByMonth: function (SCM, config) {\n            var result = null;\n            if (config.repository) {\n              result = SCM.getCommitsByMonth(config.repository);\n            }\n            return result;\n          }\n        },\n        edit: edit\n      })\n      .widget('scm-commits-last-commits', {\n        title: 'SCM Last Commit Chart',\n        description: 'Displays line chart for the last 50 commits',\n        category: category,\n        templateUrl: '{widgetsPath}/scm/src/charts/line-chart.html',\n        controller: 'LastCommitsController',\n        controllerAs: 'vm',\n        reload: true,\n        resolve: {\n          repository: resolveRepository,\n          commits: function (SCM, config) {\n            var result = null;\n            if (config.repository) {\n              result = SCM.getCommits(config.repository, 50);\n            }\n            return result;\n          }\n        },\n        edit: edit\n      })\n      .widget('scm-commits', {\n        title: 'SCM Commits',\n        description: 'Displays last commits',\n        category: category,\n        templateUrl: '{widgetsPath}/scm/src/commits/view.html',\n        controller: 'CommitsController',\n        controllerAs: 'vm',\n        reload: true,\n        resolve: {\n          repository: resolveRepository,\n          commits: function (SCM, config) {\n            var result = null;\n            if (config.repository) {\n              result = SCM.getCommits(config.repository, 10);\n            }\n            return result;\n          }\n        },\n        edit: edit\n      })\n      .widget('scm-markdown-content', {\n        title: 'SCM Markdown Content',\n        description: 'Displays a Markdown Content Preview',\n        category: category,\n        templateUrl: '{widgetsPath}/scm/src/markdownPreview/view.html',\n        controller: 'MarkdownPreviewController',\n        controllerAs: 'vm',\n        reload: true,\n        resolve: {\n          repository: resolveRepository,\n          fileContent: function (SCM, config) {\n            var result = null;\n            if (config.repository && config.path) {\n              result = SCM.getFileContent(config.repository, config.path);\n            }\n            return result;\n          }\n        },\n        edit: {\n          templateUrl: '{widgetsPath}/scm/src/markdownPreview/edit.html',\n          controller: 'MarkdownPreviewEditController',\n          controllerAs: 'vm',\n          resolve: {\n            /** @ngInject **/\n            repositories: function (SCM) {\n              return SCM.getRepositories();\n            }\n          }\n        }\n      });\n  });\n","(function(window, undefined) {'use strict';\n/*\n * The MIT License\n *\n * Copyright (c) 2016, Sebastian Sdorra\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n\n\nangular.module('adf.widget.scm', ['adf.provider', 'chart.js', 'ngSanitize', 'btford.markdown'])\n  .config([\"dashboardProvider\", function (dashboardProvider) {\n\n    // category for widget add dialog\n    var category = 'SCM-Manager';\n\n    var edit = {\n      templateUrl: '{widgetsPath}/scm/src/edit/edit.html',\n      controller: 'ScmEditController',\n      controllerAs: 'vm',\n      resolve: {\n        /** @ngInject **/\n        repositories: [\"SCM\", function (SCM) {\n          return SCM.getRepositories();\n        }]\n      }\n    };\n\n    var resolveRepository = function (SCM, config) {\n      var result = null;\n      if (config.repository) {\n        result = SCM.getRepository(config.repository);\n      }\n      return result;\n    };\n    resolveRepository.$inject = [\"SCM\", \"config\"];\n\n    dashboardProvider\n      .widget('scm-commits-by-author', {\n        title: 'SCM Commits By Author',\n        description: 'Displays pie chart for commit count by author',\n        category: category,\n        templateUrl: '{widgetsPath}/scm/src/charts/pie-chart.html',\n        controller: 'CommitsByAuthorController',\n        controllerAs: 'vm',\n        reload: true,\n        resolve: {\n          repository: resolveRepository,\n          commitsByAuthor: [\"SCM\", \"config\", function (SCM, config) {\n            var result = null;\n            if (config.repository) {\n              result = SCM.getCommitsByAuthor(config.repository);\n            }\n            return result;\n          }]\n        },\n        edit: edit\n      })\n      .widget('scm-commits-by-month', {\n        title: 'SCM Commits By Month',\n        description: 'Displays line chart for commit count by month',\n        category: category,\n        templateUrl: '{widgetsPath}/scm/src/charts/line-chart.html',\n        controller: 'CommitsByMonthController',\n        controllerAs: 'vm',\n        reload: true,\n        resolve: {\n          repository: resolveRepository,\n          commitsByMonth: [\"SCM\", \"config\", function (SCM, config) {\n            var result = null;\n            if (config.repository) {\n              result = SCM.getCommitsByMonth(config.repository);\n            }\n            return result;\n          }]\n        },\n        edit: edit\n      })\n      .widget('scm-commits-last-commits', {\n        title: 'SCM Last Commit Chart',\n        description: 'Displays line chart for the last 50 commits',\n        category: category,\n        templateUrl: '{widgetsPath}/scm/src/charts/line-chart.html',\n        controller: 'LastCommitsController',\n        controllerAs: 'vm',\n        reload: true,\n        resolve: {\n          repository: resolveRepository,\n          commits: [\"SCM\", \"config\", function (SCM, config) {\n            var result = null;\n            if (config.repository) {\n              result = SCM.getCommits(config.repository, 50);\n            }\n            return result;\n          }]\n        },\n        edit: edit\n      })\n      .widget('scm-commits', {\n        title: 'SCM Commits',\n        description: 'Displays last commits',\n        category: category,\n        templateUrl: '{widgetsPath}/scm/src/commits/view.html',\n        controller: 'CommitsController',\n        controllerAs: 'vm',\n        reload: true,\n        resolve: {\n          repository: resolveRepository,\n          commits: [\"SCM\", \"config\", function (SCM, config) {\n            var result = null;\n            if (config.repository) {\n              result = SCM.getCommits(config.repository, 10);\n            }\n            return result;\n          }]\n        },\n        edit: edit\n      })\n      .widget('scm-markdown-content', {\n        title: 'SCM Markdown Content',\n        description: 'Displays a Markdown Content Preview',\n        category: category,\n        templateUrl: '{widgetsPath}/scm/src/markdownPreview/view.html',\n        controller: 'MarkdownPreviewController',\n        controllerAs: 'vm',\n        reload: true,\n        resolve: {\n          repository: resolveRepository,\n          fileContent: [\"SCM\", \"config\", function (SCM, config) {\n            var result = null;\n            if (config.repository && config.path) {\n              result = SCM.getFileContent(config.repository, config.path);\n            }\n            return result;\n          }]\n        },\n        edit: {\n          templateUrl: '{widgetsPath}/scm/src/markdownPreview/edit.html',\n          controller: 'MarkdownPreviewEditController',\n          controllerAs: 'vm',\n          resolve: {\n            /** @ngInject **/\n            repositories: [\"SCM\", function (SCM) {\n              return SCM.getRepositories();\n            }]\n          }\n        }\n      });\n  }]);\n\nangular.module(\"adf.widget.scm\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"{widgetsPath}/scm/src/charts/line-chart.html\",\"<div><div class=\\\"alert alert-info\\\" ng-if=!vm.chart>Please insert a repository path in the widget configuration</div><div ng-if=\\\"vm.repository.status == 404 || vm.repository.status == 500\\\" class=\\\"alert alert-danger\\\"><b>Error {{vm.repository.status}}</b> the endpoint could not be reached, this could mean that the selected repository does not exist or that the statistics plugin is not installed</div><div ng-if=vm.chart><canvas id=line class=\\\"chart chart-line\\\" chart-data=vm.chart.data chart-labels=vm.chart.labels chart-series=vm.chart.series chart-options=vm.chart.options></canvas></div></div>\");\n$templateCache.put(\"{widgetsPath}/scm/src/charts/pie-chart.html\",\"<div><div class=\\\"alert alert-info\\\" ng-if=!vm.chart>Please insert a repository path in the widget configuration</div><div ng-if=\\\"vm.repository.status == 404 || vm.repository.status == 500\\\" class=\\\"alert alert-danger\\\"><b>Error {{vm.repository.status}}</b> the endpoint could not be reached, this could mean that the selected repository does not exist or that the statistics plugin is not installed</div><div ng-if=vm.chart><canvas id=pie class=\\\"chart chart-pie\\\" chart-legend=true chart-data=vm.chart.data chart-labels=vm.chart.labels chart-options=vm.chart.options></canvas></div></div>\");\n$templateCache.put(\"{widgetsPath}/scm/src/edit/edit.html\",\"<form role=form><div class=form-group><label for=repository>Repository</label><select name=repository id=repository class=form-control ng-model=config.repository><option ng-repeat=\\\"repository in vm.repositories | orderBy: \\'name\\'\\\" value={{repository.id}}>{{repository.name}}</option></select></div></form>\");\n$templateCache.put(\"{widgetsPath}/scm/src/commits/view.html\",\"<div><div ng-if=!config.repository class=\\\"alert alert-info\\\">Please configure a repository</div><div ng-if=\\\"vm.repository.status == 404 || vm.repository.status == 500\\\" class=\\\"alert alert-danger\\\"><b>Error {{vm.repository.status}}</b> the endpoint could not be reached, this could mean that the selected repository does not exist</div><div ng-if=config.repository><ul class=media-list><li class=media ng-repeat=\\\"commit in vm.commits\\\"><div ng-if=vm.gravatarHash(commit) class=media-left><img class=\\\"media-object img-thumbnail\\\" ng-src=\\\"http://www.gravatar.com/avatar/{{vm.gravatarHash(commit)}}?s=64&d=identicon\\\"></div><div class=media-body><p ng-bind-html=commit.description></p><small>{{commit.author.name}}, {{commit.date | date: \\'yyyy-MM-dd HH:mm\\'}}</small></div></li></ul></div></div>\");\n$templateCache.put(\"{widgetsPath}/scm/src/markdownPreview/edit.html\",\"<form role=form><div class=form-group><p><label for=repository>Repository</label><select name=repository id=repository class=form-control ng-model=config.repository ng-init=vm.getBranchesByRepositoryId(config.repository) ng-change=vm.getBranchesByRepositoryId(config.repository)><option ng-repeat=\\\"repository in vm.repositories | orderBy: \\'name\\'\\\" value={{repository.id}}>{{repository.name}}</option></select></p><p ng-if=vm.branches><label for=branch>Branch</label><select name=branch id=branch class=form-control ng-model=config.branch><option ng-repeat=\\\"branch in vm.branches| orderBy: \\'name\\'\\\" value={{branch.id}}>{{branch.name}}</option></select></p><label for=path>Path to Markdown File</label> <input type=text class=form-control id=path ng-model=config.path></div></form>\");\n$templateCache.put(\"{widgetsPath}/scm/src/markdownPreview/view.html\",\"<style>\\n  div.markdownContent{\\n    overflow: auto;\\n    width: 100%;\\n  }\\n</style><div class=\\\"alert alert-info\\\" ng-if=!vm.fileContent>Please configure a specific file</div><div ng-if=vm.fileContent btf-markdown=vm.fileContent class=markdownContent></div><div class=\\\"alert alert-danger\\\" ng-if=\\\"vm.fileContent.status == 500 || vm.fileContent.status == 404\\\"><b>Error {{vm.fileContent.status}}</b> Markdown-File not found. Please check your configuration and try again.</div>\");}]);\n\n\nangular.module('adf.widget.scm')\n  .controller('MarkdownPreviewEditController', [\"repositories\", \"SCM\", function (repositories, SCM) {\n    var vm = this;\n    vm.repositories = repositories;\n\n    vm.getBranchesByRepositoryId = function (repositoryId) {\n      if (repositoryId) {\n        SCM.getBranchesByRepositoryId(repositoryId).then(function (result) {\n          // catch repositories without branch support\n          if (result.status == 400)  {\n            vm.branches = null;\n          }else{\n            vm.branches = result.branch;\n          }\n        });\n      }\n    };\n\n  }]);\n\n\n\nangular.module('adf.widget.scm')\n  .controller('MarkdownPreviewController', [\"repository\", \"fileContent\", function (repository, fileContent) {\n    var vm = this;\n    vm.repository = repository;\n    vm.fileContent = fileContent;\n  }]);\n\n/*\n * The MIT License\n *\n * Copyright (c) 2016, Sebastian Sdorra\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n\n\nangular.module('adf.widget.scm')\n  .controller('CommitsController', [\"$sce\", \"config\", \"repository\", \"commits\", function ($sce, config, repository, commits) {\n    var vm = this;\n\n    vm.repository = repository;\n\n    // allow html descriptions\n    angular.forEach(commits, function (commit) {\n      commit.description = $sce.trustAsHtml(commit.description);\n    });\n    vm.commits = commits;\n\n    vm.gravatarHash = function (commit) {\n      var hash;\n      if (commit.properties) {\n        for (var i = 0; i < commit.properties.length; i++) {\n          if (commit.properties[0].key === 'gravatar-hash') {\n            hash = commit.properties[0].value;\n            break;\n          }\n        }\n      }\n      return hash;\n    };\n  }]);\n\n/*\n * The MIT License\n *\n * Copyright (c) 2016, Sebastian Sdorra\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n\n\nangular.module('adf.widget.scm')\n  .controller('ScmEditController', [\"repositories\", function(repositories){\n    var vm = this;\n\n    vm.repositories = repositories;\n  }]);\n\n/*\n * The MIT License\n *\n * Copyright (c) 2016, Sebastian Sdorra\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n\n\nangular.module('adf.widget.scm')\n  .controller('LastCommitsController', [\"$filter\", \"config\", \"repository\", \"commits\", function ($filter, config, repository, commits) {\n    var vm = this;\n    vm.repository = repository;\n\n    if (repository && commits) {\n      vm.chart = createChart();\n    }\n\n    function createChart() {\n      var options = {\n        scales: {\n          yAxes: [\n            {\n              id: 'y-axis-1',\n              display: true,\n              position: 'left',\n              ticks: {fixedStepSize: 1},\n              scaleLabel: {\n                display: true,\n                labelString: 'Commits'\n              }\n            }\n          ]\n        }\n      };\n      var chartData = [];\n      var chart = {\n        labels: [],\n        data: [chartData],\n        series: [\"Commits\"],\n        class: \"chart-line\",\n        options: options\n      };\n\n      var data = {};\n      angular.forEach(commits, function (commit) {\n        var date = new Date(commit.date);\n        var key = date.getUTCFullYear() + '-' + (date.getUTCMonth() + 1) + '-' + date.getUTCDate();\n        var entry = data[key];\n        if (entry) {\n          entry.count += 1;\n        } else {\n          data[key] = {\n            date: key,\n            count: 1\n          };\n        }\n      });\n\n      angular.forEach(data, function (entry) {\n        chart.labels.push(entry.date);\n        chartData.push(entry.count);\n      });\n\n      chart.labels.reverse();\n      chartData.reverse();\n\n      return chart;\n    }\n  }]);\n\n/*\n * The MIT License\n *\n * Copyright (c) 2016, Sebastian Sdorra\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n\n\nangular.module('adf.widget.scm')\n  .controller('CommitsByMonthController', [\"config\", \"repository\", \"commitsByMonth\", function (config, repository, commitsByMonth) {\n    var vm = this;\n    vm.repository = repository;\n\n    if (commitsByMonth) {\n      vm.chart = createChart();\n    }\n\n    function createChart() {\n      var chartData = [];\n      var options = {\n        scales: {\n          yAxes: [\n            {\n              id: 'y-axis-1',\n              display: true,\n              position: 'left',\n              ticks: {fixedStepSize: 1},\n              scaleLabel: {\n                display: true,\n                labelString: 'Commits'\n              }\n            }\n          ]\n        }\n      };\n      var chart = {\n        labels: [],\n        data: [chartData],\n        series: [\"Commits\"],\n        class: \"chart-line\",\n        options: options\n      };\n\n      angular.forEach(commitsByMonth.month, function (month) {\n        chart.labels.push(month.value);\n        chartData.push(month.count);\n      });\n\n      return chart;\n    }\n  }]);\n\n/*\n * The MIT License\n *\n * Copyright (c) 2016, Sebastian Sdorra\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n\n\nangular.module('adf.widget.scm')\n  .controller('CommitsByAuthorController', [\"config\", \"repository\", \"commitsByAuthor\", function (config, repository, commitsByAuthor) {\n    var vm = this;\n    vm.repository = repository;\n\n    if (repository && commitsByAuthor) {\n      vm.chart = createChart();\n    }\n\n    function createChart() {\n      var data = {};\n\n      angular.forEach(commitsByAuthor.author, function (entry) {\n        var author = entry.value;\n        data[author] = entry.count;\n      });\n\n      var options = {\n        legend: {\n          display: true,\n          position: \"bottom\"\n        }\n      };\n\n      var chart = {\n        labels: [],\n        data: [],\n        series: [\"Commits\"],\n        class: \"chart-pie\",\n        options: options\n      };\n\n      angular.forEach(data, function (count, author) {\n        chart.labels.push(author);\n        chart.data.push(count);\n      });\n\n      return chart;\n    }\n  }]);\n\n/*\n * The MIT License\n *\n * Copyright (c) 2016, Sebastian Sdorra\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n\n\nangular.module('adf.widget.scm')\n  .factory('SCM', [\"scmEndpoint\", \"$http\", function (scmEndpoint, $http) {\n\n    function request(url) {\n      return $http.get(scmEndpoint + url).then(function (response) {\n        if (response.status == 200) {\n          return response.data;\n        }\n      }, function (error) {\n        return error;\n      });\n    }\n\n    function getRepositories() {\n      return request('repositories.json');\n    }\n\n    function getRepository(id) {\n      return request('repositories/' + id + '.json');\n    }\n\n    function getCommitsByAuthor(id) {\n      return request('plugins/statistic/' + id + '/commits-per-author.json');\n    }\n\n    function getCommitsByMonth(id) {\n      return request('plugins/statistic/' + id + '/commits-per-month.json');\n    }\n\n    function getCommits(id, limit) {\n      return request('repositories/' + id + '/changesets.json?limit=' + limit).then(function (data) {\n        return data.changesets;\n      });\n    }\n\n    function getFileContent(id, filePath) {\n      return request('repositories/' + id + '/content?path=' + filePath);\n    }\n\n    function getBranchesByRepositoryId(id) {\n      return request('repositories/' + id + '/branches');\n    }\n\n    return {\n      getRepositories: getRepositories,\n      getRepository: getRepository,\n      getCommitsByAuthor: getCommitsByAuthor,\n      getCommitsByMonth: getCommitsByMonth,\n      getCommits: getCommits,\n      getFileContent: getFileContent,\n      getBranchesByRepositoryId: getBranchesByRepositoryId\n    };\n  }]);\n})(window);",null,"'use strict';\n\nangular.module('adf.widget.scm')\n  .controller('MarkdownPreviewEditController', function (repositories, SCM) {\n    var vm = this;\n    vm.repositories = repositories;\n\n    vm.getBranchesByRepositoryId = function (repositoryId) {\n      if (repositoryId) {\n        SCM.getBranchesByRepositoryId(repositoryId).then(function (result) {\n          // catch repositories without branch support\n          if (result.status == 400)  {\n            vm.branches = null;\n          }else{\n            vm.branches = result.branch;\n          }\n        });\n      }\n    };\n\n  });\n","'use strict';\n\nangular.module('adf.widget.scm')\n  .controller('MarkdownPreviewController', function (repository, fileContent) {\n    var vm = this;\n    vm.repository = repository;\n    vm.fileContent = fileContent;\n  });\n","/*\n * The MIT License\n *\n * Copyright (c) 2016, Sebastian Sdorra\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nangular.module('adf.widget.scm')\n  .controller('CommitsController', function ($sce, config, repository, commits) {\n    var vm = this;\n\n    vm.repository = repository;\n\n    // allow html descriptions\n    angular.forEach(commits, function (commit) {\n      commit.description = $sce.trustAsHtml(commit.description);\n    });\n    vm.commits = commits;\n\n    vm.gravatarHash = function (commit) {\n      var hash;\n      if (commit.properties) {\n        for (var i = 0; i < commit.properties.length; i++) {\n          if (commit.properties[0].key === 'gravatar-hash') {\n            hash = commit.properties[0].value;\n            break;\n          }\n        }\n      }\n      return hash;\n    };\n  });\n","/*\n * The MIT License\n *\n * Copyright (c) 2016, Sebastian Sdorra\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nangular.module('adf.widget.scm')\n  .controller('ScmEditController', function(repositories){\n    var vm = this;\n\n    vm.repositories = repositories;\n  });\n","/*\n * The MIT License\n *\n * Copyright (c) 2016, Sebastian Sdorra\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nangular.module('adf.widget.scm')\n  .controller('LastCommitsController', function ($filter, config, repository, commits) {\n    var vm = this;\n    vm.repository = repository;\n\n    if (repository && commits) {\n      vm.chart = createChart();\n    }\n\n    function createChart() {\n      var options = {\n        scales: {\n          yAxes: [\n            {\n              id: 'y-axis-1',\n              display: true,\n              position: 'left',\n              ticks: {fixedStepSize: 1},\n              scaleLabel: {\n                display: true,\n                labelString: 'Commits'\n              }\n            }\n          ]\n        }\n      };\n      var chartData = [];\n      var chart = {\n        labels: [],\n        data: [chartData],\n        series: [\"Commits\"],\n        class: \"chart-line\",\n        options: options\n      };\n\n      var data = {};\n      angular.forEach(commits, function (commit) {\n        var date = new Date(commit.date);\n        var key = date.getUTCFullYear() + '-' + (date.getUTCMonth() + 1) + '-' + date.getUTCDate();\n        var entry = data[key];\n        if (entry) {\n          entry.count += 1;\n        } else {\n          data[key] = {\n            date: key,\n            count: 1\n          };\n        }\n      });\n\n      angular.forEach(data, function (entry) {\n        chart.labels.push(entry.date);\n        chartData.push(entry.count);\n      });\n\n      chart.labels.reverse();\n      chartData.reverse();\n\n      return chart;\n    }\n  });\n","/*\n * The MIT License\n *\n * Copyright (c) 2016, Sebastian Sdorra\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nangular.module('adf.widget.scm')\n  .controller('CommitsByMonthController', function (config, repository, commitsByMonth) {\n    var vm = this;\n    vm.repository = repository;\n\n    if (commitsByMonth) {\n      vm.chart = createChart();\n    }\n\n    function createChart() {\n      var chartData = [];\n      var options = {\n        scales: {\n          yAxes: [\n            {\n              id: 'y-axis-1',\n              display: true,\n              position: 'left',\n              ticks: {fixedStepSize: 1},\n              scaleLabel: {\n                display: true,\n                labelString: 'Commits'\n              }\n            }\n          ]\n        }\n      };\n      var chart = {\n        labels: [],\n        data: [chartData],\n        series: [\"Commits\"],\n        class: \"chart-line\",\n        options: options\n      };\n\n      angular.forEach(commitsByMonth.month, function (month) {\n        chart.labels.push(month.value);\n        chartData.push(month.count);\n      });\n\n      return chart;\n    }\n  });\n","/*\n * The MIT License\n *\n * Copyright (c) 2016, Sebastian Sdorra\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nangular.module('adf.widget.scm')\n  .controller('CommitsByAuthorController', function (config, repository, commitsByAuthor) {\n    var vm = this;\n    vm.repository = repository;\n\n    if (repository && commitsByAuthor) {\n      vm.chart = createChart();\n    }\n\n    function createChart() {\n      var data = {};\n\n      angular.forEach(commitsByAuthor.author, function (entry) {\n        var author = entry.value;\n        data[author] = entry.count;\n      });\n\n      var options = {\n        legend: {\n          display: true,\n          position: \"bottom\"\n        }\n      };\n\n      var chart = {\n        labels: [],\n        data: [],\n        series: [\"Commits\"],\n        class: \"chart-pie\",\n        options: options\n      };\n\n      angular.forEach(data, function (count, author) {\n        chart.labels.push(author);\n        chart.data.push(count);\n      });\n\n      return chart;\n    }\n  });\n","/*\n * The MIT License\n *\n * Copyright (c) 2016, Sebastian Sdorra\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nangular.module('adf.widget.scm')\n  .factory('SCM', function (scmEndpoint, $http) {\n\n    function request(url) {\n      return $http.get(scmEndpoint + url).then(function (response) {\n        if (response.status == 200) {\n          return response.data;\n        }\n      }, function (error) {\n        return error;\n      });\n    }\n\n    function getRepositories() {\n      return request('repositories.json');\n    }\n\n    function getRepository(id) {\n      return request('repositories/' + id + '.json');\n    }\n\n    function getCommitsByAuthor(id) {\n      return request('plugins/statistic/' + id + '/commits-per-author.json');\n    }\n\n    function getCommitsByMonth(id) {\n      return request('plugins/statistic/' + id + '/commits-per-month.json');\n    }\n\n    function getCommits(id, limit) {\n      return request('repositories/' + id + '/changesets.json?limit=' + limit).then(function (data) {\n        return data.changesets;\n      });\n    }\n\n    function getFileContent(id, filePath) {\n      return request('repositories/' + id + '/content?path=' + filePath);\n    }\n\n    function getBranchesByRepositoryId(id) {\n      return request('repositories/' + id + '/branches');\n    }\n\n    return {\n      getRepositories: getRepositories,\n      getRepository: getRepository,\n      getCommitsByAuthor: getCommitsByAuthor,\n      getCommitsByMonth: getCommitsByMonth,\n      getCommits: getCommits,\n      getFileContent: getFileContent,\n      getBranchesByRepositoryId: getBranchesByRepositoryId\n    };\n  });\n","(function(window, undefined) {'use strict';\n/*\n * The MIT License\n *\n * Copyright (c) 2016, Sebastian Sdorra\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n\n\nangular.module('adf.widget.scm', ['adf.provider', 'chart.js', 'ngSanitize', 'btford.markdown'])\n  .config(function (dashboardProvider) {\n\n    // category for widget add dialog\n    var category = 'SCM-Manager';\n\n    var edit = {\n      templateUrl: '{widgetsPath}/scm/src/edit/edit.html',\n      controller: 'ScmEditController',\n      controllerAs: 'vm',\n      resolve: {\n        /** @ngInject **/\n        repositories: function (SCM) {\n          return SCM.getRepositories();\n        }\n      }\n    };\n\n    var resolveRepository = function (SCM, config) {\n      var result = null;\n      if (config.repository) {\n        result = SCM.getRepository(config.repository);\n      }\n      return result;\n    };\n\n    dashboardProvider\n      .widget('scm-commits-by-author', {\n        title: 'SCM Commits By Author',\n        description: 'Displays pie chart for commit count by author',\n        category: category,\n        templateUrl: '{widgetsPath}/scm/src/charts/pie-chart.html',\n        controller: 'CommitsByAuthorController',\n        controllerAs: 'vm',\n        reload: true,\n        resolve: {\n          repository: resolveRepository,\n          commitsByAuthor: function (SCM, config) {\n            var result = null;\n            if (config.repository) {\n              result = SCM.getCommitsByAuthor(config.repository);\n            }\n            return result;\n          }\n        },\n        edit: edit\n      })\n      .widget('scm-commits-by-month', {\n        title: 'SCM Commits By Month',\n        description: 'Displays line chart for commit count by month',\n        category: category,\n        templateUrl: '{widgetsPath}/scm/src/charts/line-chart.html',\n        controller: 'CommitsByMonthController',\n        controllerAs: 'vm',\n        reload: true,\n        resolve: {\n          repository: resolveRepository,\n          commitsByMonth: function (SCM, config) {\n            var result = null;\n            if (config.repository) {\n              result = SCM.getCommitsByMonth(config.repository);\n            }\n            return result;\n          }\n        },\n        edit: edit\n      })\n      .widget('scm-commits-last-commits', {\n        title: 'SCM Last Commit Chart',\n        description: 'Displays line chart for the last 50 commits',\n        category: category,\n        templateUrl: '{widgetsPath}/scm/src/charts/line-chart.html',\n        controller: 'LastCommitsController',\n        controllerAs: 'vm',\n        reload: true,\n        resolve: {\n          repository: resolveRepository,\n          commits: function (SCM, config) {\n            var result = null;\n            if (config.repository) {\n              result = SCM.getCommits(config.repository, 50);\n            }\n            return result;\n          }\n        },\n        edit: edit\n      })\n      .widget('scm-commits', {\n        title: 'SCM Commits',\n        description: 'Displays last commits',\n        category: category,\n        templateUrl: '{widgetsPath}/scm/src/commits/view.html',\n        controller: 'CommitsController',\n        controllerAs: 'vm',\n        reload: true,\n        resolve: {\n          repository: resolveRepository,\n          commits: function (SCM, config) {\n            var result = null;\n            if (config.repository) {\n              result = SCM.getCommits(config.repository, 10);\n            }\n            return result;\n          }\n        },\n        edit: edit\n      })\n      .widget('scm-markdown-content', {\n        title: 'SCM Markdown Content',\n        description: 'Displays a Markdown Content Preview',\n        category: category,\n        templateUrl: '{widgetsPath}/scm/src/markdownPreview/view.html',\n        controller: 'MarkdownPreviewController',\n        controllerAs: 'vm',\n        reload: true,\n        resolve: {\n          repository: resolveRepository,\n          fileContent: function (SCM, config) {\n            var result = null;\n            if (config.repository && config.path) {\n              result = SCM.getFileContent(config.repository, config.path);\n            }\n            return result;\n          }\n        },\n        edit: {\n          templateUrl: '{widgetsPath}/scm/src/markdownPreview/edit.html',\n          controller: 'MarkdownPreviewEditController',\n          controllerAs: 'vm',\n          resolve: {\n            /** @ngInject **/\n            repositories: function (SCM) {\n              return SCM.getRepositories();\n            }\n          }\n        }\n      });\n  });\n\nangular.module(\"adf.widget.scm\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"{widgetsPath}/scm/src/charts/line-chart.html\",\"<div><div class=\\\"alert alert-info\\\" ng-if=!vm.chart>Please insert a repository path in the widget configuration</div><div ng-if=\\\"vm.repository.status == 404 || vm.repository.status == 500\\\" class=\\\"alert alert-danger\\\"><b>Error {{vm.repository.status}}</b> the endpoint could not be reached, this could mean that the selected repository does not exist or that the statistics plugin is not installed</div><div ng-if=vm.chart><canvas id=line class=\\\"chart chart-line\\\" chart-data=vm.chart.data chart-labels=vm.chart.labels chart-series=vm.chart.series chart-options=vm.chart.options></canvas></div></div>\");\n$templateCache.put(\"{widgetsPath}/scm/src/charts/pie-chart.html\",\"<div><div class=\\\"alert alert-info\\\" ng-if=!vm.chart>Please insert a repository path in the widget configuration</div><div ng-if=\\\"vm.repository.status == 404 || vm.repository.status == 500\\\" class=\\\"alert alert-danger\\\"><b>Error {{vm.repository.status}}</b> the endpoint could not be reached, this could mean that the selected repository does not exist or that the statistics plugin is not installed</div><div ng-if=vm.chart><canvas id=pie class=\\\"chart chart-pie\\\" chart-legend=true chart-data=vm.chart.data chart-labels=vm.chart.labels chart-options=vm.chart.options></canvas></div></div>\");\n$templateCache.put(\"{widgetsPath}/scm/src/edit/edit.html\",\"<form role=form><div class=form-group><label for=repository>Repository</label><select name=repository id=repository class=form-control ng-model=config.repository><option ng-repeat=\\\"repository in vm.repositories | orderBy: \\'name\\'\\\" value={{repository.id}}>{{repository.name}}</option></select></div></form>\");\n$templateCache.put(\"{widgetsPath}/scm/src/commits/view.html\",\"<div><div ng-if=!config.repository class=\\\"alert alert-info\\\">Please configure a repository</div><div ng-if=\\\"vm.repository.status == 404 || vm.repository.status == 500\\\" class=\\\"alert alert-danger\\\"><b>Error {{vm.repository.status}}</b> the endpoint could not be reached, this could mean that the selected repository does not exist</div><div ng-if=config.repository><ul class=media-list><li class=media ng-repeat=\\\"commit in vm.commits\\\"><div ng-if=vm.gravatarHash(commit) class=media-left><img class=\\\"media-object img-thumbnail\\\" ng-src=\\\"http://www.gravatar.com/avatar/{{vm.gravatarHash(commit)}}?s=64&d=identicon\\\"></div><div class=media-body><p ng-bind-html=commit.description></p><small>{{commit.author.name}}, {{commit.date | date: \\'yyyy-MM-dd HH:mm\\'}}</small></div></li></ul></div></div>\");\n$templateCache.put(\"{widgetsPath}/scm/src/markdownPreview/edit.html\",\"<form role=form><div class=form-group><p><label for=repository>Repository</label><select name=repository id=repository class=form-control ng-model=config.repository ng-init=vm.getBranchesByRepositoryId(config.repository) ng-change=vm.getBranchesByRepositoryId(config.repository)><option ng-repeat=\\\"repository in vm.repositories | orderBy: \\'name\\'\\\" value={{repository.id}}>{{repository.name}}</option></select></p><p ng-if=vm.branches><label for=branch>Branch</label><select name=branch id=branch class=form-control ng-model=config.branch><option ng-repeat=\\\"branch in vm.branches| orderBy: \\'name\\'\\\" value={{branch.id}}>{{branch.name}}</option></select></p><label for=path>Path to Markdown File</label> <input type=text class=form-control id=path ng-model=config.path></div></form>\");\n$templateCache.put(\"{widgetsPath}/scm/src/markdownPreview/view.html\",\"<style>\\n  div.markdownContent{\\n    overflow: auto;\\n    width: 100%;\\n  }\\n</style><div class=\\\"alert alert-info\\\" ng-if=!vm.fileContent>Please configure a specific file</div><div ng-if=vm.fileContent btf-markdown=vm.fileContent class=markdownContent></div><div class=\\\"alert alert-danger\\\" ng-if=\\\"vm.fileContent.status == 500 || vm.fileContent.status == 404\\\"><b>Error {{vm.fileContent.status}}</b> Markdown-File not found. Please check your configuration and try again.</div>\");}]);\n\n\nangular.module('adf.widget.scm')\n  .controller('MarkdownPreviewEditController', function (repositories, SCM) {\n    var vm = this;\n    vm.repositories = repositories;\n\n    vm.getBranchesByRepositoryId = function (repositoryId) {\n      if (repositoryId) {\n        SCM.getBranchesByRepositoryId(repositoryId).then(function (result) {\n          // catch repositories without branch support\n          if (result.status == 400)  {\n            vm.branches = null;\n          }else{\n            vm.branches = result.branch;\n          }\n        });\n      }\n    };\n\n  });\n\n\n\nangular.module('adf.widget.scm')\n  .controller('MarkdownPreviewController', function (repository, fileContent) {\n    var vm = this;\n    vm.repository = repository;\n    vm.fileContent = fileContent;\n  });\n\n/*\n * The MIT License\n *\n * Copyright (c) 2016, Sebastian Sdorra\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n\n\nangular.module('adf.widget.scm')\n  .controller('CommitsController', function ($sce, config, repository, commits) {\n    var vm = this;\n\n    vm.repository = repository;\n\n    // allow html descriptions\n    angular.forEach(commits, function (commit) {\n      commit.description = $sce.trustAsHtml(commit.description);\n    });\n    vm.commits = commits;\n\n    vm.gravatarHash = function (commit) {\n      var hash;\n      if (commit.properties) {\n        for (var i = 0; i < commit.properties.length; i++) {\n          if (commit.properties[0].key === 'gravatar-hash') {\n            hash = commit.properties[0].value;\n            break;\n          }\n        }\n      }\n      return hash;\n    };\n  });\n\n/*\n * The MIT License\n *\n * Copyright (c) 2016, Sebastian Sdorra\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n\n\nangular.module('adf.widget.scm')\n  .controller('ScmEditController', function(repositories){\n    var vm = this;\n\n    vm.repositories = repositories;\n  });\n\n/*\n * The MIT License\n *\n * Copyright (c) 2016, Sebastian Sdorra\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n\n\nangular.module('adf.widget.scm')\n  .controller('LastCommitsController', function ($filter, config, repository, commits) {\n    var vm = this;\n    vm.repository = repository;\n\n    if (repository && commits) {\n      vm.chart = createChart();\n    }\n\n    function createChart() {\n      var options = {\n        scales: {\n          yAxes: [\n            {\n              id: 'y-axis-1',\n              display: true,\n              position: 'left',\n              ticks: {fixedStepSize: 1},\n              scaleLabel: {\n                display: true,\n                labelString: 'Commits'\n              }\n            }\n          ]\n        }\n      };\n      var chartData = [];\n      var chart = {\n        labels: [],\n        data: [chartData],\n        series: [\"Commits\"],\n        class: \"chart-line\",\n        options: options\n      };\n\n      var data = {};\n      angular.forEach(commits, function (commit) {\n        var date = new Date(commit.date);\n        var key = date.getUTCFullYear() + '-' + (date.getUTCMonth() + 1) + '-' + date.getUTCDate();\n        var entry = data[key];\n        if (entry) {\n          entry.count += 1;\n        } else {\n          data[key] = {\n            date: key,\n            count: 1\n          };\n        }\n      });\n\n      angular.forEach(data, function (entry) {\n        chart.labels.push(entry.date);\n        chartData.push(entry.count);\n      });\n\n      chart.labels.reverse();\n      chartData.reverse();\n\n      return chart;\n    }\n  });\n\n/*\n * The MIT License\n *\n * Copyright (c) 2016, Sebastian Sdorra\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n\n\nangular.module('adf.widget.scm')\n  .controller('CommitsByMonthController', function (config, repository, commitsByMonth) {\n    var vm = this;\n    vm.repository = repository;\n\n    if (commitsByMonth) {\n      vm.chart = createChart();\n    }\n\n    function createChart() {\n      var chartData = [];\n      var options = {\n        scales: {\n          yAxes: [\n            {\n              id: 'y-axis-1',\n              display: true,\n              position: 'left',\n              ticks: {fixedStepSize: 1},\n              scaleLabel: {\n                display: true,\n                labelString: 'Commits'\n              }\n            }\n          ]\n        }\n      };\n      var chart = {\n        labels: [],\n        data: [chartData],\n        series: [\"Commits\"],\n        class: \"chart-line\",\n        options: options\n      };\n\n      angular.forEach(commitsByMonth.month, function (month) {\n        chart.labels.push(month.value);\n        chartData.push(month.count);\n      });\n\n      return chart;\n    }\n  });\n\n/*\n * The MIT License\n *\n * Copyright (c) 2016, Sebastian Sdorra\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n\n\nangular.module('adf.widget.scm')\n  .controller('CommitsByAuthorController', function (config, repository, commitsByAuthor) {\n    var vm = this;\n    vm.repository = repository;\n\n    if (repository && commitsByAuthor) {\n      vm.chart = createChart();\n    }\n\n    function createChart() {\n      var data = {};\n\n      angular.forEach(commitsByAuthor.author, function (entry) {\n        var author = entry.value;\n        data[author] = entry.count;\n      });\n\n      var options = {\n        legend: {\n          display: true,\n          position: \"bottom\"\n        }\n      };\n\n      var chart = {\n        labels: [],\n        data: [],\n        series: [\"Commits\"],\n        class: \"chart-pie\",\n        options: options\n      };\n\n      angular.forEach(data, function (count, author) {\n        chart.labels.push(author);\n        chart.data.push(count);\n      });\n\n      return chart;\n    }\n  });\n\n/*\n * The MIT License\n *\n * Copyright (c) 2016, Sebastian Sdorra\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n\n\nangular.module('adf.widget.scm')\n  .factory('SCM', function (scmEndpoint, $http) {\n\n    function request(url) {\n      return $http.get(scmEndpoint + url).then(function (response) {\n        if (response.status == 200) {\n          return response.data;\n        }\n      }, function (error) {\n        return error;\n      });\n    }\n\n    function getRepositories() {\n      return request('repositories.json');\n    }\n\n    function getRepository(id) {\n      return request('repositories/' + id + '.json');\n    }\n\n    function getCommitsByAuthor(id) {\n      return request('plugins/statistic/' + id + '/commits-per-author.json');\n    }\n\n    function getCommitsByMonth(id) {\n      return request('plugins/statistic/' + id + '/commits-per-month.json');\n    }\n\n    function getCommits(id, limit) {\n      return request('repositories/' + id + '/changesets.json?limit=' + limit).then(function (data) {\n        return data.changesets;\n      });\n    }\n\n    function getFileContent(id, filePath) {\n      return request('repositories/' + id + '/content?path=' + filePath);\n    }\n\n    function getBranchesByRepositoryId(id) {\n      return request('repositories/' + id + '/branches');\n    }\n\n    return {\n      getRepositories: getRepositories,\n      getRepository: getRepository,\n      getCommitsByAuthor: getCommitsByAuthor,\n      getCommitsByMonth: getCommitsByMonth,\n      getCommits: getCommits,\n      getFileContent: getFileContent,\n      getBranchesByRepositoryId: getBranchesByRepositoryId\n    };\n  });\n})(window);"]}